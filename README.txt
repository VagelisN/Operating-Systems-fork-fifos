Project2 README file

Το πρόγραμμα υλοποιήθηκε από: Ευάγγελος Νεαμονίτης ΑΜ:1115201400123
sdi1400123@di.uoa.gr

Έχουν γίνει όλα όσα ζητήθηκαν από την εκφώνηση.

Έχει τεσταριστεί με valgrind οτι δεν υπάρχουν memory leaks με είσοδο όλα τα αρχεία που δόθηκαν.

Έχει γίνει Makefile οπότε για compilation χρειάζεται απλά ενα make. 

Για την εκτέλεση: ./shapes -i "inputfile.bin" -w "number of workers wanted" -d "directory"


Αρχικά η διεργασία Master παίρνει τα ορίσματα που δόθηκαν στην γραμμή εντολών και ορίζει πόσα σημεία απο το αρχείο εισόδου θα ο κάθε worker (PointsToReadCount).Στη συνέχεια περιμένει να πάρει εντολές από το stdin με τη μορφή που ορίζεται στην εκφώνηση.Ανάλογα με το πόσα σχήματα δόθηκαν από το stdin, με τη χρήση της fork, δημηουργείται ο κατάλληλος αριθμός από Handler διεργασίες( μια για κάθε σχήμα).

Η κάθε Handler διεργασία ανοίγει τόσα named pipes όσα και ο αριθμός των workers.Μετά ,με τη χρήση της fork, δημιουργεί τόσες worker διεργασίες όσες ορίστηκαν στην γραμμη εντολών πριν την εκελεση του shapes.Αφού φτιαχτούν οι worker διεργασίες η handler διεργασία περιμένει, με τη χρήση της poll, να τελειώσει μια οποιαδήποτε διεργασία worker να γράφει τα σημεία που της αναλογούν και αρχίζει να συνθέτει το τελικό output αρχείο το οποίο θα χρησιμοποιήσει ο Master στη συνέχεια.Αφού θα έχουν τελειώσει όλες οι διεργασίες worker και ο handler θα έχει συνθέσει το αρχείο με τα στοιχεία που έδωσαν όλοι οι workers, πρέπει να αποδεσμεύσει τη μνήμη που "κληρονόμησε" από τη διεργασία Master μετά τη fork. Τελικά κάνει exit.

Τέλος ο Master περιμένει να τελειώσουν όλες οι διεργασίες Handler που δημιούργησε και συνθέτει το gnuplot script και καλεί το gnuplot μέσω της fork με είσοδο το script ωστέ να δημιουργηθεί η εικόνα με τα στοιχεία από όλα τα αρχεία που έδωσαν οι Handlers.Μετά ο χρήστης μπορεί να δώσει νέα εντολή ή exit. Άν δοθεί νέα εντολή επαναλαμβάνεται η παραπάνω διαδικασία αλλιώς αποδεσμεύεται η απαραίτητη μνήμη και τελειώνει η εκτέλεση του προγράματος.




